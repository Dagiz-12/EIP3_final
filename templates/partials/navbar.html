{% load static %}

<!-- Logo -->
<a href="{% url 'home' %}" class="flex items-center space-x-2 group">
  <div class="w-10 h-10 bg-gradient-to-br from-sky-500 to-sky-600 rounded-full flex items-center justify-center group-hover:from-sky-600 group-hover:to-sky-700 transition-all duration-300 shadow-md">
    <span class="text-white font-bold">EIP</span>
  </div>
  <span class="text-2xl font-bold text-sky-900 hidden md:block">
    EIP Ethiopia
  </span>
</a>

<!-- Desktop Menu -->
<div class="hidden md:flex items-center space-x-6">
  <a
    href="{% url 'home' %}"
    class="nav-link {% if request.path == '/' %}text-sky-600 font-semibold border-b-2 border-sky-500{% else %}text-slate-700 hover:text-sky-600{% endif %} px-3 py-2 transition-all duration-200"
  >
    <i class="fas fa-home mr-2 text-sm"></i> Home
  </a>

  <!-- About Dropdown - IMPROVED -->
  <div class="relative group" id="about-dropdown-container">
    <button
      class="nav-link flex items-center {% if '/about/' in request.path %}text-sky-600 font-semibold border-b-2 border-sky-500{% else %}text-slate-700 hover:text-sky-600{% endif %} px-3 py-2 transition-all duration-200 group"
      aria-expanded="false"
      aria-controls="about-dropdown"
    >
      <i class="fas fa-info-circle mr-2 text-sm"></i> About Us
      <i
        class="ml-1 fas fa-chevron-down text-xs transition-transform duration-200 group-hover:rotate-180"
        id="about-chevron"
      ></i>
    </button>
    <div
      id="about-dropdown"
      class="absolute hidden group-hover:block hover:block bg-white shadow-xl rounded-lg mt-1 py-2 w-56 z-50 border border-slate-100 min-w-max transition-all duration-200 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 translate-y-2"
      style="top: 100%; left: 0;"
    >
      <div class="py-2">
        <a
          href="{% url 'about_who_we_are' %}"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if request.path == '/about/who-we-are/' %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-landmark mr-3 text-sky-500"></i>
          <span>Who We Are</span>
        </a>
        <a
          href="{% url 'about_guiding_principles' %}"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if request.path == '/about/guiding-principles/' %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-compass mr-3 text-sky-500"></i>
          <span>Guiding Principles</span>
        </a>
        <a
          href="{% url 'about_strategies' %}"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if request.path == '/about/strategies/' %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-chart-line mr-3 text-sky-500"></i>
          <span>Strategies & Priorities</span>
        </a>
        <a
          href="{% url 'about_board_members' %}"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if request.path == '/about/board-members/' %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-users mr-3 text-sky-500"></i>
          <span>Board Members</span>
        </a>
      </div>
    </div>
  </div>

  <!-- What We Do -->
  <a
    href="{% url 'what_we_do' %}"
    class="nav-link {% if request.path == '/what-we-do/' %}text-sky-600 font-semibold border-b-2 border-sky-500{% else %}text-slate-700 hover:text-sky-600{% endif %} px-3 py-2 transition-all duration-200"
  >
    <i class="fas fa-project-diagram mr-2 text-sm"></i> What We Do
  </a>

  <!-- Media Dropdown - IMPROVED -->
  <div class="relative group" id="media-dropdown-container">
    <button
      class="nav-link flex items-center {% if '/publications/' in request.path or '/blog/' in request.path %}text-sky-600 font-semibold border-b-2 border-sky-500{% else %}text-slate-700 hover:text-sky-600{% endif %} px-3 py-2 transition-all duration-200 group"
      aria-expanded="false"
      aria-controls="media-dropdown"
    >
      <i class="fas fa-newspaper mr-2 text-sm"></i> Media
      <i
        class="ml-1 fas fa-chevron-down text-xs transition-transform duration-200 group-hover:rotate-180"
        id="media-chevron"
      ></i>
    </button>
    <div
      id="media-dropdown"
      class="absolute hidden group-hover:block hover:block bg-white shadow-xl rounded-lg mt-1 py-2 w-56 z-50 border border-slate-100 min-w-max transition-all duration-200 opacity-0 group-hover:opacity-100 group-hover:translate-y-0 translate-y-2"
      style="top: 100%; left: 0;"
    >
      <div class="py-2">
        <a
          href="{% url 'publications_list' %}"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if request.path == '/publications/' %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-file-pdf mr-3 text-sky-500"></i>
          <span>Publications</span>
        </a>
        <a
          href="{% url 'blog_list' %}?type=news"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if 'type=news' in request.GET.urlencode %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-bullhorn mr-3 text-sky-500"></i>
          <span>News</span>
        </a>
        <a
          href="{% url 'blog_list' %}"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if request.path == '/blog/' and 'type=news' not in request.GET.urlencode %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-blog mr-3 text-sky-500"></i>
          <span>Blog</span>
        </a>
        <a
          href="{% url 'blog_list' %}?type=implementation"
          class="block px-4 py-3 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 flex items-center {% if 'type=implementation' in request.GET.urlencode %}bg-sky-50 text-sky-600 border-l-4 border-sky-500{% endif %}"
        >
          <i class="fas fa-tasks mr-3 text-sky-500"></i>
          <span>Implementation</span>
        </a>
      </div>
    </div>
  </div>

  <a
    href="{% url 'vacancies_list' %}"
    class="nav-link {% if '/vacancies/' in request.path %}text-sky-600 font-semibold border-b-2 border-sky-500{% else %}text-slate-700 hover:text-sky-600{% endif %} px-3 py-2 transition-all duration-200"
  >
    <i class="fas fa-briefcase mr-2 text-sm"></i> Vacancies
  </a>

  <a
    href="{% url 'contact' %}"
    class="nav-link {% if request.path == '/contact/' %}text-sky-600 font-semibold border-b-2 border-sky-500{% else %}text-slate-700 hover:text-sky-600{% endif %} px-3 py-2 transition-all duration-200"
  >
    <i class="fas fa-envelope mr-2 text-sm"></i> Contact
  </a>

  <!-- Search Bar - IMPROVED -->
  <div class="relative">
    <form method="GET" action="{% url 'search' %}" class="relative">
      <input
        type="text"
        name="q"
        placeholder="Search..."
        value="{{ request.GET.q }}"
        class="pl-10 pr-4 py-2 border border-slate-300 rounded-full focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition duration-200 w-48 bg-slate-50 hover:bg-white"
      />
      <i class="fas fa-search absolute left-3 top-3 text-slate-400"></i>
    </form>
  </div>
</div>

<!-- Add this JavaScript for dropdown functionality -->
<script src="{% static 'js/navigation.js' %}"></script>