{% load static %}

<!-- Logo -->
<a href="{% url 'home' %}" class="flex items-center space-x-2">
  <div
    class="w-10 h-10 bg-sky-600 rounded-full flex items-center justify-center"
  >
    <span class="text-white font-bold">EIP</span>
  </div>
  <span class="text-2xl font-bold text-sky-800 hidden md:block"
    >EIP Ethiopia</span
  >
</a>

<!-- Desktop Menu -->
<div class="hidden md:flex items-center space-x-8">
  <a
    href="{% url 'home' %}"
    class="nav-link {% if request.path == '/' %}text-sky-600 font-semibold{% else %}text-gray-700 hover:text-sky-600{% endif %}"
  >
    Home
  </a>

  <!-- About Dropdown - FIXED -->
  <div class="relative nav-dropdown-container">
    <button
      class="nav-link flex items-center {% if '/about/' in request.path %}text-sky-600 font-semibold{% else %}text-gray-700 hover:text-sky-600{% endif %}"
      aria-expanded="false"
      aria-controls="about-dropdown"
    >
      About Us
      <i
        class="ml-1 fas fa-chevron-down text-xs transition-transform duration-200"
        id="about-chevron"
      ></i>
    </button>
    <div
      id="about-dropdown"
      class="absolute hidden nav-dropdown bg-white shadow-xl rounded-lg mt-2 py-2 w-48 z-50 border border-gray-100 min-w-max"
      style="top: 100%; left: -50%; transform: translateX(-25%);"
    >
      <div class="py-2">
        <a
          href="{% url 'about_who_we_are' %}"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if request.path == '/about/who-we-are/' %}bg-sky-50 text-sky-600{% endif %}"
        >
          Who We Are
        </a>
        <a
          href="{% url 'about_guiding_principles' %}"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if request.path == '/about/guiding-principles/' %}bg-sky-50 text-sky-600{% endif %}"
        >
          Guiding Principles
        </a>
        <a
          href="{% url 'about_strategies' %}"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if request.path == '/about/strategies/' %}bg-sky-50 text-sky-600{% endif %}"
        >
          Strategies & Priorities
        </a>
        <a
          href="{% url 'about_board_members' %}"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if request.path == '/about/board-members/' %}bg-sky-50 text-sky-600{% endif %}"
        >
          Board Members
        </a>
      </div>
    </div>
  </div>

  <a
    href="{% url 'what_we_do' %}"
    class="nav-link {% if request.path == '/what-we-do/' %}text-sky-600 font-semibold{% else %}text-gray-700 hover:text-sky-600{% endif %}"
  >
    What We Do
  </a>

  <!-- Media Dropdown - FIXED -->
  <div class="relative nav-dropdown-container">
    <button
      class="nav-link flex items-center {% if '/publications/' in request.path or '/blog/' in request.path %}text-sky-600 font-semibold{% else %}text-gray-700 hover:text-sky-600{% endif %}"
      aria-expanded="false"
      aria-controls="media-dropdown"
    >
      Media
      <i
        class="ml-1 fas fa-chevron-down text-xs transition-transform duration-200"
        id="media-chevron"
      ></i>
    </button>
    <div
      id="media-dropdown"
      class="absolute hidden nav-dropdown bg-white shadow-xl rounded-lg mt-2 py-2 w-48 z-50 border border-gray-100 min-w-max"
      style="top: 100%; left: -50%; transform: translateX(-25%);"
    >
      <div class="py-2">
        <a
          href="{% url 'publications_list' %}"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if request.path == '/publications/' %}bg-sky-50 text-sky-600{% endif %}"
        >
          Publications
        </a>
        <a
          href="{% url 'blog_list' %}?type=news"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if 'type=news' in request.GET.urlencode %}bg-sky-50 text-sky-600{% endif %}"
        >
          News
        </a>
        <a
          href="{% url 'blog_list' %}"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if request.path == '/blog/' and 'type=news' not in request.GET.urlencode %}bg-sky-50 text-sky-600{% endif %}"
        >
          Blog
        </a>
        <a
          href="{% url 'blog_list' %}?type=implementation"
          class="block px-4 py-2 hover:bg-sky-50 hover:text-sky-700 transition-colors duration-150 {% if 'type=implementation' in request.GET.urlencode %}bg-sky-50 text-sky-600{% endif %}"
        >
          Implementation
        </a>
      </div>
    </div>
  </div>

  <a
    href="{% url 'vacancies_list' %}"
    class="nav-link {% if '/vacancies/' in request.path %}text-sky-600 font-semibold{% else %}text-gray-700 hover:text-sky-600{% endif %}"
  >
    Vacancies
  </a>

  <a
    href="{% url 'contact' %}"
    class="nav-link {% if request.path == '/contact/' %}text-sky-600 font-semibold{% else %}text-gray-700 hover:text-sky-600{% endif %}"
  >
    Contact
  </a>

  <!-- Search Bar -->
  <div class="relative">
    <form method="GET" action="{% url 'search' %}" class="relative">
      <input
        type="text"
        name="q"
        placeholder="Search..."
        value="{{ request.GET.q }}"
        class="pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent transition duration-200 w-48"
      />
      <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
    </form>
  </div>
</div>

<!-- Add this JavaScript for dropdown functionality -->
<script src="{% static 'js/navigation.js' %}"></script>